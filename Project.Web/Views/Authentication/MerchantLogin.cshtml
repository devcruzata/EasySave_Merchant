@{
    Layout = null;
}
<!DOCTYPE html>
<html class="bg-black" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8" />
    <title>
        EasySave | Merchant Log-In
    </title>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport" />
    <!-- bootstrap 3.0.2 -->
    <link href="@Url.Content("~/Content/css/bootstrap.min.css")" rel="stylesheet" type="text/css" />
    <!-- font Awesome -->
    <link href="@Url.Content("~/Content/css/font-awesome.min.css")" rel="stylesheet" type="text/css" />
    <!-- Theme style -->
    <link href="@Url.Content("~/Content/css/custom.css")" rel="stylesheet" type="text/css" />
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    <!-- jQuery 2.0.2 -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="@Url.Content("~/Content/js/bootstrap.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/js/Login-min.js")" type="text/javascript"></script>
</head>
<body class="bg-black bg-body-back">
    <div class="page_text">
        <span style="color:black !important;">Reward | Grow Sales | Retain Your Customers</span>
        @*<p>
            This system helps you manage & retain customers, generate revenue, boost brand reputation,
            Increase sales by including enticing awards, automatically communicates with and
            keeps track of your customers so they never go missing.
        </p>*@
        <p style="color:black !important;">
            Loyalty Made Easy.
        </p>
    </div>
    <div class="form-box login-box-tweak" id="login-box">
        <div class="header login-box-head">
            Merchant - Log In
        </div>
        <form method="post" action="/Authentication/MerchantLogin" id="LoginForm" onsubmit="return validateForm();">
            <div class="body bg-gray noback">
                @if (ViewBag.Error_Msg != "")
                {
                    <div id="messagepanel" class="row">
                        <div class="col-md-12">
                            <div class="box-body">
                                <span id="Span1" class="login-error">@ViewBag.Error_Msg</span>
                            </div>
                        </div>
                    </div>
                }


                <div id="userdiv" class="form-group login-box-margin">
                    <input name="Username" type="text" id="Username" autofocus class="form-control rounded-txt login_input" placeholder="User ID" />
                    <div id="error_div_UserName" style="display:none;">
                        <p style="color:red;">Please Enter UserName</p>
                    </div>
                </div>
                <div id="passdiv" class="form-group login-box-margin">
                    <input name="Password" type="Password" id="Password" class="form-control rounded-txt login_input" placeholder="Password" />
                    <div id="error_div_Password1" style="display:none;">
                        <p style="color:red;">Please Enter Password</p>
                    </div>
                    <div id="error_div_Password2" style="display:none;">
                        <p style="color:red;">Password Should be minimum of 6 Character</p>
                    </div>
                </div>
                <div class="form-group txt-white login-box-margin remember_box">
                    <input name="remember_me" type="checkbox" id="remember_me" />
                    Remember me
                </div>
                <div class="forgot_pswd">
                    <p class="right-justify">
                        <a class="frgt-pass-lnk txt-white" href="#" data-toggle="modal" data-target="#compose-modal">
                            I forgot my password
                        </a>
                    </p>
                </div>
            </div>
            <div class="footer noback">
                <button id="loginBtn" type="submit" class="btn bg-olive btn-block color-cruz text-black login_button">
                    Log in
                </button>
                <input type="submit" name="btnLogin" value="Button" id="btnLogin" style="display: none" />

            </div>
            <div class="social_icons">
                <ul>
                    <li><a href="https://www.facebook.com"><i class="fa fa-facebook"></i></a></li>
                    <li><a href="https://www.twitter.com"><i class="fa fa-twitter"></i></a></li>
                    <li><a href="https://www.dribbble.com"><i class="fa fa-dribbble"></i></a></li>
                    <li><a href="https://www.github.com"><i class="fa fa-github"></i></a></li>
                    <li><a href="https://www.instagram.com"><i class="fa fa-instagram"></i></a></li>
                    <li>
                        <a href="https://in.linkedin.com">
                            <i class="fa fa-linkedin">
                            </i>
                        </a>
                    </li>
                </ul>
            </div>
        </form>
    </div>
    <div class="modal fade" style="top: 100px; overflow: auto" id="compose-modal" tabindex="-1"
         role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title header-black">
                        <i class="fa fa-undo"></i>&nbsp;Forgot Password
                    </h4>
                </div>
                <div id="email1">
                    <div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <input type="text" class="form-control rounded-txt" id="email" placeholder="Please Enter Your Email Id" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer clearfix">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">
                            <i class="fa fa-times"></i>&nbsp;Cancel
                        </button>
                        <button id="btnreset" type="button" class="btn btn-primary">
                            <i class="fa fa-tags"></i>&nbsp; Send Request
                        </button>

                    </div>
                </div>
                <div id="email2" class="hidden">
                    <div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="box-body">
                                        <span id="errorMsg"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <footer id="footer" class="footer_style">
        <div class="container">
            <p>Copyright &copy; EasySave Incorporated 2017, All right reserved</p>
        </div>
    </footer>
</body>
</html>
<script type="text/javascript">
    $(document).ready(function () {
        $('#compose-modal').on('shown.bs.modal', function (e) {
            $('#email').val('');
            $('#email1').removeClass('hidden');
            $('#email2').addClass('hidden');
        });
        
    });

    function sentPassword(){   
            $('#email').removeClass('required-field');
            if ($.trim($('#email').val()) != '') {
                var re = /^[A-Za-z0-9._]*\@@[A-Za-z]*\.[A-Za-z]{2,5}$/;
                if (re.test($('#email').val())) {
                    var username = $('#email').val();
                    $('#email2').removeClass('hidden');
                    $('#email1').addClass('hidden');
                    $('#errorMsg').html("<div class='alert'><img src='/Content/img/email_req.GIF' alt='Sending request...' /></div>");
                   
                    /***** Ajax call *****/
                    $.ajax({                       
                        url: '/Authentication/ForgotPassword',
                        dataType: "json",
                        type: "POST",
                        contentType: 'application/json; charset=utf-8',
                        data: JSON.stringify({ email: username }),
                        async: true,
                        processData: false,
                        cache: false,
                        success: function (msg) {
                            DisplayConfirmation(msg)
                        },
                        error: function () {
                            $('#email').val('');
                            $('#errorMsg').html("<div class='alert alert-success alert-dismissable'>"
                                + "<b>Sorry! </b> Error while sending password reset request." + "</div>");
                        }
                    });
                    /************ En of Ajax call ****************/
                }
                else {
                    $('#email').addClass('required-field');
                }
            }
            else {
                $('#email').addClass('required-field');
            }
       
    }

    function DisplayConfirmation(msg) {
        //alert(msg['ErrorMessage']);
        //$('#messagepanel').removeAttr("hidden");
        $('#email').val('');
        //$('#email2').removeClass('hidden');
        //$('#email1').addClass('hidden');
        if (msg != "" && msg == "A Email is sent to your registered Email, Please Check") {
            $('#errorMsg').html("<div class='alert alert-success alert-dismissable'>"
                                + "<b>" + msg + "</div>");
        }
        else {
            $('#errorMsg').html("<div class='alert alert-danger alert-dismissable'>"
                            + "<b>Sorry! </b> " + msg + "</div>");
        }
    }
</script>

<script type="text/javascript">
    $(document).ready(function () {
        $('input[type="text"]').bind('keypress', function (event) {
            var regex = /[`~!#$%^&*()_|+\-=?;:'",<>\{\}\[\]\\\/]/gi;
            var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
            if (regex.test(key)) {
                event.preventDefault();
                return false;
            }
        });
        $('input[type="password"]').bind('keypress', function (event) {
            var regex = /[,<>\{\}\[\]\\\/]/gi;
            var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
            if (regex.test(key)) {
                event.preventDefault();
                return false;
            }
        });
    });
</script>

<script>

    function validateForm() {
        if ($("#Username").val().trim() == "") {
            $("#error_div_UserName").show();
            return false;
        }
        else if ($("#Password").val().trim() == "") {
            $("#error_div_Password1").show();
            $("#error_div_UserName").hide();
            return false;
        }
        else if ($("#Password").val().trim().length < 6) {
            $("#error_div_Password2").show();
            $("#error_div_Password1").hide();
            $("#error_div_UserName").hide();
            return false;
        }
        else {
            $("#error_div_Password2").hide();
            $("#error_div_Password1").hide();
            $("#error_div_UserName").hide();
            return true;
        }
    }
</script>
